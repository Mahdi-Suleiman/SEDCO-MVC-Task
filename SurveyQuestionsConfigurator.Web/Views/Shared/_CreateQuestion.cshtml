@model SurveyQuestionsConfigurator.Entities.Question

@{
    ViewBag.Title = "_Question";
    string cultureInfo = System.Globalization.CultureInfo.CurrentCulture.Name;
    string tArabic = "ar-JO";
    bool tIsArabic = (cultureInfo == tArabic ? true : false);
    string[] tArabicQuestionType = { "وجه مبتسم", "شريط", "نجمة" };
    string[] tEnglishQuestionType = { "Smiley Face", "Slider", "Star" };

    string tSmiley = cultureInfo == tArabic ? tArabicQuestionType[0] : tEnglishQuestionType[0];
    string tSlider = cultureInfo == tArabic ? tArabicQuestionType[1] : tEnglishQuestionType[1];
    string tStar = cultureInfo == tArabic ? tArabicQuestionType[2] : tEnglishQuestionType[2];
}

@*@using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()*@

<div class="form-group">
    @Html.LabelFor(model => model.Order, htmlAttributes: new { @class = "" })
        @Html.EditorFor(model => model.Order, new { htmlAttributes = new { @class = "form-control", min = "1", max = "9999999" } })
        @Html.ValidationMessageFor(model => model.Order, "", new { @class = "text-danger" })
</div>

<div class="form-group">
    @Html.LabelFor(model => model.Text, htmlAttributes: new { @class = "" })
        @Html.TextAreaFor(model => model.Text, htmlAttributes: new { @class = "form-control", rows = "3", style = "resize:vertical;", maxlength = "3999" })
        @Html.ValidationMessageFor(model => model.Text, "", new { @class = "text-danger" })
</div>
<div class="form-group">
    @Html.LabelFor(model => model.Type, htmlAttributes: new { @class = "" })
        @*@Html.EnumDropDownListFor(model => model.Type, htmlAttributes: new { @class = "form-control", @onchange = "QuestionTypeChanged()" })*@
        <select class="form-control valid" data-val="true" data-val-required="The Type field is required." id="Type" name="Type" onchange="QuestionTypeChanged()" aria-describedby="Type-error" aria-invalid="false">
            <option selected="selected" value="0">@tSmiley</option>
            <option value="1">@tSlider</option>
            <option value="2">@tStar</option>
        </select>   
    @Html.ValidationMessageFor(model => model.Type, "", new { @class = "text-danger" })
</div>
@* } *@

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script>
    ///Change partial view on selection change
    function QuestionTypeChanged() {
        const tActionNames = ["/Questions/PartialSmiley", "/Questions/PartialSlider", "/Questions/PartialStar"];
        const sel = document.getElementById("Type"); //dropdownlist
        const text = sel.selectedIndex;
        switch (text) {
            case 0: {
                $("#partialView").load(tActionNames[0]);
            }
             break;
            case 1: {
                $("#partialView").load(tActionNames[1]);
            }
             break;
            case 2: {
                $("#partialView").load(tActionNames[2]);
            }
             break;
            default: {
                $("#partialView").load(tActionNames[0]);
                }
             break;
        }
        //Sys.Mvc.FormContext._Application_Load();
    }


    //function SetDefaultValue()
    //{
    //    alert("aaa")
    //    var tQuestionType = window.location.href.split("Question")[0].split("/");
    //    const sel = document.getElementById("Type");
    //    console.log(tQuestionType.toUpperCase());
    //    if (tQuestionType.toUpperCase() == "SMILEY") {
    //        sel.selectedIndex = 0
    //    }
    //    else if (tQuestionType.toUpperCase() == "SLIDER") {
    //        sel.selectedIndex = 1
    //    }
    //    else {
    //        sel.selectedIndex = 2
    //    }


    //    //alert(tQuestionType[currentUrlWithoutParams.length - 1]);
    //}
</script>

@*@if (Model.Type == SurveyQuestionsConfigurator.Entities.Generic.QuestionType.SMILEY)
        {
    <script>
        const sel = document.getElementById("Type");
        sel.selectedIndex = 0
    </script>
        }
        else if (Model.Type == SurveyQuestionsConfigurator.Entities.Generic.QuestionType.SLIDER)
        {
    <script>
        const sel = document.getElementById("Type");
        sel.selectedIndex = 1
    </script>
        }
        else
        {
    <script>
        const sel = document.getElementById("Type");
        sel.selectedIndex = 2
    </script>
        }*@
